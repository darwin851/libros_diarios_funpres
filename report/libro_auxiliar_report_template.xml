<odoo>
    <template id="libro_auxiliar_template_pdf">
        <t t-call="web.external_layout">
            <main>
                <div class="page">
                    <h2>Libro Auxiliar</h2>
                    <p>
                        <strong>Empresa:</strong>
                        <span t-esc="docs.env.company.name"/>
                    </p>
                    <p>
                        <strong>Usuario:</strong>
                        <span t-esc="docs.env.user.name"/>
                    </p>
                    <p>
                        <strong>Periodo:</strong>
                        <span t-esc="docs.date_from"/>
                        —
                        <span t-esc="docs.date_to"/>
                    </p>
                    <table style="width:100%; border-collapse:collapse;" border="0">
                        <thead>
                            <tr>
                                <th style="border:none;">Cuenta</th>
                                <th style="border:none;">Saldo Inicial</th>
                                <th style="border:none;">Debe</th>
                                <th style="border:none;">Haber</th>
                                <th style="border:none;">Saldo Final</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="accounts" t-as="ac">
                                <!-- Bloque de cada cuenta -->
                                <tr>
                                    <td colspan="5" style="border:none; font-weight:bold;">
                                        <t t-esc="ac['title']"/>
                                    </td>
                                </tr>
                                <!-- Saldo Inicial -->
                                <tr>
                                    <td style="border:none;">Saldo Inicial</td>
                                    <td style="border:none; text-align:right;">
                                        <t t-esc="'{:,.2f}'.format(ac['saldo_ini'])"/>
                                    </td>
                                    <td style="border:none;"/>
                                    <td style="border:none;"/>
                                    <td style="border:none; text-align:right;">
                                        <t t-esc="'{:,.2f}'.format(ac['saldo_ini'])"/>
                                    </td>
                                </tr>
                                <!-- Líneas de asiento -->
                                <t t-foreach="ac['lines']" t-as="ln">
                                    <tr>
                                        <td style="border:none;"/>
                                        <td style="border:none; text-align:right;">
                                            <t t-esc="'{:,.2f}'.format(ln['debit'])"/>
                                        </td>
                                        <td style="border:none; text-align:right;">
                                            <t t-esc="'{:,.2f}'.format(ln['credit'])"/>
                                        </td>
                                        <td style="border:none; text-align:right;">
                                            <t t-esc="'{:,.2f}'.format(ln['saldo'])"/>
                                        </td>
                                        <td style="border:none;"/>
                                    </tr>
                                </t>
                                <!-- Total de la cuenta -->
                                <tr>
                                    <td style="border:none; font-weight:bold; text-align:right;">
                                        Total Cuenta:
                                    </td>
                                    <td style="border:none; text-align:right; font-weight:bold;">
                                        <t t-esc="'{:,.2f}'.format(ac['subtotal_debe'])"/>
                                    </td>
                                    <td style="border:none; text-align:right; font-weight:bold;">
                                        <t t-esc="'{:,.2f}'.format(ac['subtotal_haber'])"/>
                                    </td>
                                    <td style="border:none; text-align:right; font-weight:bold;">
                                        <t t-esc="'{:,.2f}'.format(ac['saldo_fin'])"/>
                                    </td>
                                    <td style="border:none;"/>
                                </tr>
                                <!-- Separador -->
                                <tr>
                                    <td colspan="5" style="border:none; height:8px;"/>
                                </tr>
                            </t>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td style="border:none; text-align:right; font-weight:bold;">
                                    Total General:
                                </td>
                                <td style="border:none; text-align:right; font-weight:bold;">
                                    <t t-esc="'{:,.2f}'.format(total_debe)"/>
                                </td>
                                <td style="border:none; text-align:right; font-weight:bold;">
                                    <t t-esc="'{:,.2f}'.format(total_haber)"/>
                                </td>
                                <td style="border:none;"/>
                                <td style="border:none;"/>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </main>
        </t>
    </template>
</odoo>
